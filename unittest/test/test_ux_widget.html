<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>UX Unit Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link type="text/css" rel="stylesheet" href="https://static2.sharepointonline.com/files/fabric/office-ui-fabric-core/11.0.0/css/fabric.min.css"/>
    <script type="module" src="https://unpkg.com/@fluentui/web-components@2.6.1/dist/web-components.min.js"></script>

    <script type="text/javascript" src="umockup.js"></script>

    <link type="text/css" rel="stylesheet" href="../../ux/base.css"/>
    <script type="text/javascript" src="../../ux/base.js"></script>
    <!-- field widgets -->
    <link type="text/css" rel="stylesheet" href="../../ux/button.css"/>
    <script type="text/javascript" src="../../ux/button.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/checkbox.css"/>
    <script type="text/javascript" src="../../ux/checkbox.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/number_field.css"/>
    <script type="text/javascript" src="../../ux/number_field.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/plain_text.css"/>
    <script type="text/javascript" src="../../ux/plain_text.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/radio_group.css"/>
    <script type="text/javascript" src="../../ux/radio_group.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/select.css"/>
    <script type="text/javascript" src="../../ux/select.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/switch.css"/>
    <script type="text/javascript" src="../../ux/switch.js"></script>
    <script type="module" src="../../ux/switch_UXWF.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/text_area.css"/>
    <script type="text/javascript" src="../../ux/text_area.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/text_field.css"/>
    <script type="text/javascript" src="../../ux/text_field.js"></script>
    <!-- complex widgets -->
    <link type="text/css" rel="stylesheet" href="../../ux/controlbar.css"/>
    <script type="text/javascript" src="../../ux/controlbar.js"></script>
    <link type="text/css" rel="stylesheet" href="../../ux/toolbar.css"/>
    <script type="text/javascript" src="../../ux/toolbar.js"></script>

    <link type="text/css" rel="stylesheet" href="../node_modules/mocha/mocha.css" />
    <script type="text/javascript" src="../node_modules/mocha/mocha.js"></script>
    <script type="text/javascript" src="../node_modules/chai/chai.js"></script>
    <script type="text/javascript" src="../node_modules/chai-dom/chai-dom.js"></script>
    <script type="text/javascript" src="../node_modules/sinon/pkg/sinon.js"></script>

    <script class="mocha-init">
      mocha.setup('bdd');
      mocha.checkLeaks();
    </script>
  </head>
  <body style="margin: 2em;">
    
    <h2>UX-Widget: <span id="widget-name"></span></h2>

    <div id="widget-container">
      <span id="ux-widget">UX.Button</span>
    </div>

    <hr/>
    <!-- Unit test script -->
    <script id="test-script" type="text/javascript"></script>
    

    <h2 >Widget Test: <span id="test-script-name"></span></h2>
    <h2 id="mocha-ut" ><span id="mocha-ut1"></span></h2>

    <div id="mocha"></div>
    <script class="mocha-exec" type="module">
      let el = document.getElementById("test-script");
      var f =0;
      const WidgetName = umockup.getTestJsName();
      const scriptName = umockup.getScriptName();
      let  a = umockup.getTestJsName();
      let b  = umockup.getScriptName();
if(b===null){
      
      el.src = WidgetName;
    f=1;
}
      el.src = scriptName;
   


  
  if(a){
   
      el.onload = function () {
        mocha.run();
      };

      el.onerror = function () {
        console.log("Failed to load");
        if(f===1){
        document.getElementById("mocha-ut").innerHTML = "Failed to load the widget!  Please check  script name  or verify that file <u><i>"+WidgetName+"   </i></u> is available in folder!";
        }
      
      else
        document.getElementById("mocha-ut").innerHTML = "Failed to load the script!  Please check  widget name & script name   or verify that file <u><i>"+scriptName+"   </i></u> is available in folder!";

      };
    }
    else{
      document.getElementById("mocha-ut").innerHTML = "The widget name \"\"  entered is  empty . Please Enter a widget name!!";
    }
  

     
    </script>

    <script type="text/javascript">
      // update document
      const widgetName = umockup.getWidgetName();
      document.title = "Unit test - " + widgetName + " - " + scriptName;
      el = document.getElementById("widget-name");
      el.innerHTML = widgetName;
      el = document.getElementById("ux-widget");
      el.innerHTML = widgetName;
      
      el = document.getElementById("test-script-name");
      el.innerHTML = scriptName;
    </script>

</body>
</html>
